(window.webpackJsonp=window.webpackJsonp||[]).push([[602],{1250:function(t,n,e){"use strict";e.r(n);e(65),e(17),e(170),e(171),e(172),e(173),e(153);var o=e(168);const a=t=>{var n;return null===(n=((t,n)=>"object"==typeof n&&null!==n&&"links"in n&&n.links instanceof Array?n.links.find((n=>(t=>!("object"!=typeof t||null===t||!("rel"in t)||"string"!=typeof t.rel||"template"in t&&"string"!=typeof t.template||"href"in t&&"string"!=typeof t.href))(n)&&n.rel===t)):void 0)("http://ostatus.org/schema/1.0/subscribe",t))||void 0===n?void 0:n.template},i=(t,n)=>{window.parent.postMessage({type:"fetchInteractionURL-success",uri_or_domain:t,template:n},window.origin)},r=()=>{window.parent.postMessage({type:"fetchInteractionURL-failure"},window.origin)},s=t=>{const n="https://".concat(t,"/authorize_interaction?uri={uri}");o.a.get("https://".concat(t,"/.well-known/webfinger"),{params:{resource:"https://".concat(t)}}).then((e=>{let{data:o}=e;const r=a(o);i(t,null!=r?r:n)})).catch((()=>{i(t,n)}))},c=t=>{const n=(t=t.replace(/^@/,"")).split("@");if(2!==n.length||!n[0]||!(t=>{const n=new URL("https:///path");return n.hostname=t,n.hostname===t})(n[1]))return void r();const e=n[1],c="https://".concat(e,"/authorize_interaction?uri={uri}");o.a.get("https://".concat(e,"/.well-known/webfinger"),{params:{resource:"acct:".concat(t)}}).then((n=>{let{data:e}=n;const o=a(e);i(t,null!=o?o:c)})).catch((()=>{s(e)}))},p=t=>{""===t?r():/^https?:\/\//.test(t)?(t=>{const n=new URL(t).host,e="https://".concat(n,"/authorize_interaction?uri={uri}");o.a.get("https://".concat(n,"/.well-known/webfinger"),{params:{resource:t}}).then((n=>{let{data:o}=n;const r=a(o);i(t,null!=r?r:e)})).catch((()=>{s(n)}))})(t):t.includes("@")?c(t):s(t)};window.addEventListener("message",(t=>{window.origin&&window.parent===t.source&&t.origin===window.origin&&t.data&&"object"==typeof t.data&&"type"in t.data&&"fetchInteractionURL"===t.data.type&&"uri_or_domain"in t.data&&"string"==typeof t.data.uri_or_domain&&p(t.data.uri_or_domain)}))}},[[1250,0]]]);
//# sourceMappingURL=remote_interaction_helper-9340483294897eeabf4f.chunk.js.map