(window.webpackJsonp=window.webpackJsonp||[]).push([[435],{1004:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return _}));var n=a(2),i=a(0),d=(a(17),a(1)),o=a(9),c=a(25),r=a(10),s=a.n(r),b=a(7),l=a(185);class _ extends d.PureComponent{constructor(){super(...arguments),Object(n.a)(this,"state",{loading:!0,data:null})}componentDidMount(){const{start_at:e,end_at:t,frequency:a}=this.props;Object(b.b)().post("/api/v1/admin/retention",{start_at:e,end_at:t,frequency:a}).then((e=>{this.setState({loading:!1,data:e.data})})).catch((e=>{console.error(e)}))}render(){const{loading:e,data:t}=this.state,{frequency:a}=this.props;let n;n=e?Object(i.a)(c.a,{id:"loading_indicator.label",defaultMessage:"Loadingâ€¦"}):Object(i.a)("table",{className:"retention__table"},void 0,Object(i.a)("thead",{},void 0,Object(i.a)("tr",{},void 0,Object(i.a)("th",{},void 0,Object(i.a)("div",{className:"retention__table__date retention__table__label"},void 0,Object(i.a)(c.a,{id:"admin.dashboard.retention.cohort",defaultMessage:"Sign-up month"}))),Object(i.a)("th",{},void 0,Object(i.a)("div",{className:"retention__table__number retention__table__label"},void 0,Object(i.a)(c.a,{id:"admin.dashboard.retention.cohort_size",defaultMessage:"New users"}))),t[0].data.slice(1).map(((e,t)=>Object(i.a)("th",{},e.date,Object(i.a)("div",{className:"retention__table__number retention__table__label"},void 0,t+1))))),Object(i.a)("tr",{},void 0,Object(i.a)("td",{},void 0,Object(i.a)("div",{className:"retention__table__date retention__table__average"},void 0,Object(i.a)(c.a,{id:"admin.dashboard.retention.average",defaultMessage:"Average"}))),Object(i.a)("td",{},void 0,Object(i.a)("div",{className:"retention__table__size"},void 0,Object(i.a)(o.c,{value:t.reduce(((e,t,a)=>e+(1*t.data[0].value-e)/(a+1)),0),maximumFractionDigits:0}))),t[0].data.slice(1).map(((e,a)=>{const n=t.reduce(((e,t,n)=>t.data[a+1]?e+(t.data[a+1].rate-e)/(n+1):e),0);return Object(i.a)("td",{},e.date,Object(i.a)("div",{className:s()("retention__table__box","retention__table__average","retention__table__box--".concat(Object(l.c)(100*n)))},void 0,Object(i.a)(o.c,{value:n,style:"percent"})))})))),Object(i.a)("tbody",{},void 0,t.slice(0,-1).map((e=>Object(i.a)("tr",{},e.period,Object(i.a)("td",{},void 0,Object(i.a)("div",{className:"retention__table__date"},void 0,(e=>"day"===e.frequency?Object(i.a)(o.a,{value:e.period,month:"long",day:"2-digit",timeZone:"UTC"}):Object(i.a)(o.a,{value:e.period,month:"long",year:"numeric",timeZone:"UTC"}))(e))),Object(i.a)("td",{},void 0,Object(i.a)("div",{className:"retention__table__size"},void 0,Object(i.a)(o.c,{value:e.data[0].value}))),e.data.slice(1).map((e=>Object(i.a)("td",{},e.date,Object(i.a)("div",{className:s()("retention__table__box","retention__table__box--".concat(Object(l.c)(100*e.rate)))},void 0,Object(i.a)(o.c,{value:e.rate,style:"percent"}))))))))));let d=null;if("day"===a)d=Object(i.a)(c.a,{id:"admin.dashboard.daily_retention",defaultMessage:"User retention rate by day after sign-up"});else d=Object(i.a)(c.a,{id:"admin.dashboard.monthly_retention",defaultMessage:"User retention rate by month after sign-up"});return Object(i.a)("div",{className:"retention"},void 0,Object(i.a)("h4",{},void 0,d),n)}}}}]);
//# sourceMappingURL=435-488f89e07b0dcceb5c03.chunk.js.map