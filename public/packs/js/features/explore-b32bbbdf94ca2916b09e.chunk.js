(window.webpackJsonp=window.webpackJsonp||[]).push([[456],{1550:function(e,t,s){"use strict";s.r(t);var a=s(0),i=s(2),o=(s(17),s(3)),c=s.n(o),n=s(1),l=s(9),r=s(25),d=s(55),h=s(112),b=s(19),u=s(35),g=s(8),p=s(393),j=s(140),O=s(229),m=s(228),v=s(398),_=s(6),x=s(84),y=s(1391),M=s(169),f=(s(51),s(10)),k=s.n(f),L=s(97),N=s(230),w=s(78),C=s(62),I=s(85),P=s(5);class S extends n.PureComponent{constructor(){super(...arguments),Object(i.a)(this,"state",{thumbnailLoaded:!1}),Object(i.a)(this,"handleImageLoad",(()=>this.setState({thumbnailLoaded:!0})))}render(){const{expanded:e,url:t,title:s,lang:i,publisher:o,author:c,publishedAt:n,sharedTimes:l,thumbnail:d,thumbnailDescription:h,blurhash:b}=this.props,{thumbnailLoaded:u}=this.state;return Object(a.a)("a",{className:k()("story",{expanded:e}),href:t,target:"blank",rel:"noopener"},void 0,Object(a.a)("div",{className:"story__details"},void 0,Object(a.a)("div",{className:"story__details__publisher"},void 0,o?Object(a.a)("span",{lang:i},void 0,o):Object(a.a)(I.a,{width:50}),n&&Object(P.jsxs)(P.Fragment,{children:[" · ",Object(a.a)(w.a,{timestamp:n})]})),Object(a.a)("div",{className:"story__details__title",lang:i},void 0,s||Object(a.a)(I.a,{})),Object(a.a)("div",{className:"story__details__shared"},void 0,c&&Object(P.jsxs)(P.Fragment,{children:[Object(a.a)(r.a,{id:"link_preview.author",defaultMessage:"By {name}",values:{name:Object(a.a)("strong",{},void 0,c)}})," · "]}),"number"==typeof l?Object(a.a)(C.a,{value:l,renderer:N.c}):Object(a.a)(I.a,{width:100}))),Object(a.a)("div",{className:"story__thumbnail"},void 0,d?Object(P.jsxs)(P.Fragment,{children:[Object(a.a)("div",{className:k()("story__thumbnail__preview",{"story__thumbnail__preview--hidden":u})},void 0,Object(a.a)(L.a,{hash:b})),Object(a.a)("img",{src:d,onLoad:this.handleImageLoad,alt:h,title:h,lang:i})]}):Object(a.a)(I.a,{})))}}class T extends n.PureComponent{componentDidMount(){const{dispatch:e,links:t,history:s}=this.props;"POP"===s.action&&t.size>0||e(Object(x.o)())}render(){const{isLoading:e,links:t}=this.props,s=Object(a.a)(y.a,{id:"explore/links"},void 0,Object(a.a)(r.a,{id:"dismissable_banner.explore_links",defaultMessage:"These are news stories being shared the most on the social web today. Newer news stories posted by more different people are ranked higher."}));return!e&&t.isEmpty()?Object(a.a)("div",{className:"explore__links scrollable scrollable--flex"},void 0,s,Object(a.a)("div",{className:"empty-column-indicator"},void 0,Object(a.a)(r.a,{id:"empty_column.explore_statuses",defaultMessage:"Nothing is trending right now. Check back later!"}))):Object(a.a)("div",{className:"explore__links scrollable","data-nosnippet":!0},void 0,s,e?Object(a.a)(M.a,{}):t.map(((e,t)=>Object(a.a)(S,{expanded:0===t,lang:e.get("language"),url:e.get("url"),title:e.get("title"),publisher:e.get("provider_name"),publishedAt:e.get("published_at"),author:e.get("author_name"),sharedTimes:1*e.getIn(["history",0,"accounts"])+1*e.getIn(["history",1,"accounts"]),thumbnail:e.get("image"),thumbnailDescription:e.get("image_description"),blurhash:e.get("blurhash")},e.get("id")))))}}var z=Object(g.connect)((e=>({links:e.getIn(["trends","links","items"]),isLoading:e.getIn(["trends","links","isLoading"])})))(Object(u.j)(T)),D=s(4),H=s(1404),F=s(377),A=s(1393),q=s(50),E=s(14),R=s(376),J=s(204),K=s(121),B=s(1405);const G=Object(l.d)({title:{id:"search_results.title",defaultMessage:"Search for {q}"}}),Q=e=>e.size>10&&e.size%10==1?e.skipLast(1):e;class U extends n.PureComponent{constructor(){super(...arguments),Object(i.a)(this,"state",{type:this.props.submittedType||"all"}),Object(i.a)(this,"handleSelectAll",(()=>{const{submittedType:e,dispatch:t}=this.props;e&&t(Object(q.s)()),this.setState({type:"all"})})),Object(i.a)(this,"handleSelectAccounts",(()=>{const{submittedType:e,dispatch:t}=this.props;"accounts"!==e&&t(Object(q.s)("accounts")),this.setState({type:"accounts"})})),Object(i.a)(this,"handleSelectHashtags",(()=>{const{submittedType:e,dispatch:t}=this.props;"hashtags"!==e&&t(Object(q.s)("hashtags")),this.setState({type:"hashtags"})})),Object(i.a)(this,"handleSelectStatuses",(()=>{const{submittedType:e,dispatch:t}=this.props;"statuses"!==e&&t(Object(q.s)("statuses")),this.setState({type:"statuses"})})),Object(i.a)(this,"handleLoadMoreAccounts",(()=>this._loadMore("accounts"))),Object(i.a)(this,"handleLoadMoreStatuses",(()=>this._loadMore("statuses"))),Object(i.a)(this,"handleLoadMoreHashtags",(()=>this._loadMore("hashtags"))),Object(i.a)(this,"handleLoadMore",(()=>{const{type:e}=this.state;"all"!==e&&this._loadMore(e)}))}static getDerivedStateFromProps(e,t){return e.submittedType!==t.type?{type:e.submittedType||"all"}:null}_loadMore(e){const{dispatch:t}=this.props;t(Object(q.n)(e))}render(){const{intl:e,isLoading:t,q:s,results:i}=this.props,{type:o}=this.state,c="all"!==o&&(i.get(o,Object(D.List)()).size>10&&i.get(o).size%10==1);let n;const l=i.get("accounts",Object(D.List)()),d=i.get("hashtags",Object(D.List)()),b=i.get("statuses",Object(D.List)());switch(o){case"all":n=l.size+d.size+b.size>0?Object(P.jsxs)(P.Fragment,{children:[l.size>0&&Object(a.a)(B.a,{title:Object(P.jsxs)(P.Fragment,{children:[Object(a.a)(E.a,{id:"users",icon:F.a}),Object(a.a)(r.a,{id:"search_results.accounts",defaultMessage:"Profiles"})]}),onClickMore:this.handleLoadMoreAccounts},"accounts",l.take(4).map((e=>Object(a.a)(J.a,{id:e},e)))),d.size>0&&Object(a.a)(B.a,{title:Object(P.jsxs)(P.Fragment,{children:[Object(a.a)(E.a,{id:"hashtag",icon:A.a}),Object(a.a)(r.a,{id:"search_results.hashtags",defaultMessage:"Hashtags"})]}),onClickMore:this.handleLoadMoreHashtags},"hashtags",d.take(4).map((e=>Object(a.a)(N.b,{hashtag:e},e.get("name"))))),b.size>0&&Object(a.a)(B.a,{title:Object(P.jsxs)(P.Fragment,{children:[Object(a.a)(E.a,{id:"quote-right",icon:H.a}),Object(a.a)(r.a,{id:"search_results.statuses",defaultMessage:"Posts"})]}),onClickMore:this.handleLoadMoreStatuses},"statuses",b.take(4).map((e=>Object(a.a)(K.a,{id:e},e))))]}):[];break;case"accounts":n=(e=>Q(e).map((e=>Object(a.a)(J.a,{id:e},e))))(l);break;case"hashtags":n=(e=>Q(e).map((e=>Object(a.a)(N.b,{hashtag:e},e.get("name")))))(d);break;case"statuses":n=(e=>Q(e).map((e=>Object(a.a)(K.a,{id:e},e))))(b)}return Object(P.jsxs)(P.Fragment,{children:[Object(a.a)("div",{className:"account__section-headline"},void 0,Object(a.a)("button",{onClick:this.handleSelectAll,className:"all"===o?"active":void 0},void 0,Object(a.a)(r.a,{id:"search_results.all",defaultMessage:"All"})),Object(a.a)("button",{onClick:this.handleSelectAccounts,className:"accounts"===o?"active":void 0},void 0,Object(a.a)(r.a,{id:"search_results.accounts",defaultMessage:"Profiles"})),Object(a.a)("button",{onClick:this.handleSelectHashtags,className:"hashtags"===o?"active":void 0},void 0,Object(a.a)(r.a,{id:"search_results.hashtags",defaultMessage:"Hashtags"})),Object(a.a)("button",{onClick:this.handleSelectStatuses,className:"statuses"===o?"active":void 0},void 0,Object(a.a)(r.a,{id:"search_results.statuses",defaultMessage:"Posts"}))),Object(a.a)("div",{className:"explore__search-results","data-nosnippet":!0},void 0,Object(a.a)(R.a,{scrollKey:"search-results",isLoading:t,onLoadMore:this.handleLoadMore,hasMore:c,emptyMessage:Object(a.a)(r.a,{id:"search_results.nothing_found",defaultMessage:"Could not find anything for these search terms"}),bindToDocument:!0},void 0,n)),Object(a.a)(h.a,{},void 0,Object(a.a)("title",{},void 0,e.formatMessage(G.title,{q:s})))]})}}var V=Object(g.connect)((e=>({isLoading:e.getIn(["search","isLoading"]),results:e.getIn(["search","results"]),q:e.getIn(["search","searchTerm"]),submittedType:e.getIn(["search","type"])})))(Object(d.c)(U)),W=s(61),X=s.n(W),Y=s(381),Z=s(41);class $ extends n.PureComponent{constructor(){super(...arguments),Object(i.a)(this,"handleLoadMore",X()((()=>{const{dispatch:e}=this.props;e(Object(x.m)())}),300,{leading:!0}))}componentDidMount(){const{dispatch:e,statusIds:t,history:s}=this.props;"POP"===s.action&&t.size>0||e(Object(x.p)())}render(){const{isLoading:e,hasMore:t,statusIds:s,multiColumn:i}=this.props,o=Object(a.a)(r.a,{id:"empty_column.explore_statuses",defaultMessage:"Nothing is trending right now. Check back later!"});return Object(a.a)(Y.a,{trackScroll:!0,prepend:Object(a.a)(y.a,{id:"explore/statuses"},void 0,Object(a.a)(r.a,{id:"dismissable_banner.explore_statuses",defaultMessage:"These are posts from across the social web that are gaining traction today. Newer posts with more boosts and favorites are ranked higher."})),alwaysPrepend:!0,timelineId:"explore",statusIds:s,scrollKey:"explore-statuses",hasMore:t,isLoading:e,onLoadMore:this.handleLoadMore,emptyMessage:o,bindToDocument:!i,withCounters:!0})}}var ee=Object(g.connect)((e=>({statusIds:Object(Z.d)(e,"trending"),isLoading:e.getIn(["status_lists","trending","isLoading"],!0),hasMore:!!e.getIn(["status_lists","trending","next"])})))(Object(u.j)($)),te=s(142),se=s(1413);class ae extends n.PureComponent{componentDidMount(){const{dispatch:e,suggestions:t,history:s}=this.props;"POP"===s.action&&t.size>0||e(Object(te.f)(!0))}render(){const{isLoading:e,suggestions:t}=this.props;return!e&&t.isEmpty()?Object(a.a)("div",{className:"explore__suggestions scrollable scrollable--flex"},void 0,Object(a.a)("div",{className:"empty-column-indicator"},void 0,Object(a.a)(r.a,{id:"empty_column.explore_statuses",defaultMessage:"Nothing is trending right now. Check back later!"}))):Object(a.a)("div",{className:"explore__suggestions scrollable","data-nosnippet":!0},void 0,e?Object(a.a)(M.a,{}):t.map((e=>Object(a.a)(se.a,{id:e.get("account")},e.get("account")))))}}var ie=Object(g.connect)((e=>({suggestions:e.getIn(["suggestions","items"]),isLoading:e.getIn(["suggestions","isLoading"])})))(Object(u.j)(ae));class oe extends n.PureComponent{componentDidMount(){const{dispatch:e,history:t,hashtags:s}=this.props;"POP"===t.action&&s.size>0||e(Object(x.n)())}render(){const{isLoading:e,hashtags:t}=this.props,s=Object(a.a)(y.a,{id:"explore/tags"},void 0,Object(a.a)(r.a,{id:"dismissable_banner.explore_tags",defaultMessage:"These are hashtags that are gaining traction on the social web today. Hashtags that are used by more different people are ranked higher."}));return!e&&t.isEmpty()?Object(a.a)("div",{className:"explore__links scrollable scrollable--flex"},void 0,s,Object(a.a)("div",{className:"empty-column-indicator"},void 0,Object(a.a)(r.a,{id:"empty_column.explore_statuses",defaultMessage:"Nothing is trending right now. Check back later!"}))):Object(a.a)("div",{className:"scrollable explore__links","data-nosnippet":!0},void 0,s,e?Object(a.a)(M.a,{}):t.map((e=>Object(a.a)(N.b,{hashtag:e},e.get("name")))))}}var ce=Object(g.connect)((e=>({hashtags:e.getIn(["trends","tags","items"]),isLoadingHashtags:e.getIn(["trends","tags","isLoading"])})))(Object(u.j)(oe));const ne=Object(l.d)({title:{id:"explore.title",defaultMessage:"Explore"},searchResults:{id:"explore.search_results",defaultMessage:"Search results"}});class le extends n.PureComponent{constructor(){super(...arguments),Object(i.a)(this,"handleHeaderClick",(()=>{this.column.scrollTop()})),Object(i.a)(this,"setRef",(e=>{this.column=e}))}render(){const{intl:e,multiColumn:t,isSearching:s}=this.props,{signedIn:i}=this.context.identity;return Object(P.jsxs)(O.a,{bindToDocument:!t,ref:this.setRef,label:e.formatMessage(ne.title),children:[Object(a.a)(m.a,{icon:s?"search":"explore",iconComponent:s?j.a:p.a,title:e.formatMessage(s?ne.searchResults:ne.title),onClick:this.handleHeaderClick,multiColumn:t}),Object(a.a)("div",{className:"explore__search-header"},void 0,Object(a.a)(v.a,{})),s?Object(a.a)(V,{}):Object(P.jsxs)(P.Fragment,{children:[Object(a.a)("div",{className:"account__section-headline"},void 0,Object(a.a)(b.b,{exact:!0,to:"/explore"},void 0,Object(a.a)(r.a,{tagName:"div",id:"explore.trending_statuses",defaultMessage:"Posts"})),Object(a.a)(b.b,{exact:!0,to:"/explore/tags"},void 0,Object(a.a)(r.a,{tagName:"div",id:"explore.trending_tags",defaultMessage:"Hashtags"})),i&&Object(a.a)(b.b,{exact:!0,to:"/explore/suggestions"},void 0,Object(a.a)(r.a,{tagName:"div",id:"explore.suggested_follows",defaultMessage:"People"})),Object(a.a)(b.b,{exact:!0,to:"/explore/links"},void 0,Object(a.a)(r.a,{tagName:"div",id:"explore.trending_links",defaultMessage:"News"}))),Object(a.a)(u.d,{},void 0,Object(a.a)(u.b,{path:"/explore/tags",component:ce}),Object(a.a)(u.b,{path:"/explore/links",component:z}),Object(a.a)(u.b,{path:"/explore/suggestions",component:ie}),Object(a.a)(u.b,{exact:!0,path:["/explore","/explore/posts","/search"]},void 0,Object(a.a)(ee,{multiColumn:t}))),Object(a.a)(h.a,{},void 0,Object(a.a)("title",{},void 0,e.formatMessage(ne.title)),Object(a.a)("meta",{name:"robots",content:s?"noindex":"all"}))]})]})}}Object(i.a)(le,"contextTypes",{identity:c.a.object});t.default=Object(g.connect)((e=>({layout:e.getIn(["meta","layout"]),isSearching:e.getIn(["search","submitted"])||!_.D})))(Object(d.c)(le))}}]);
//# sourceMappingURL=explore-b32bbbdf94ca2916b09e.chunk.js.map