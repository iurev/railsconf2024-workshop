(window.webpackJsonp=window.webpackJsonp||[]).push([[479],{1560:function(e,t,n){"use strict";n.r(t);var o=n(0),i=n(2),s=(n(17),n(3)),c=n.n(s),a=n(1),l=n(9),d=n(25),m=n(55),r=n(112),h=n(8),u=n(175),p=n(1391),b=n(6),y=n(203),g=n(378),j=n(24),O=n(229),M=n(228),f=n(1390),I=n(46),R=n(1389);class v extends a.PureComponent{render(){const{settings:e,onChange:t}=this.props;return Object(o.a)("div",{className:"column-settings"},void 0,Object(o.a)("section",{},void 0,Object(o.a)("div",{className:"column-settings__row"},void 0,Object(o.a)(R.a,{settings:e,settingPath:["other","onlyMedia"],onChange:t,label:Object(o.a)(d.a,{id:"community.column_settings.media_only",defaultMessage:"Media only"})}),Object(o.a)(R.a,{settings:e,settingPath:["other","onlyRemote"],onChange:t,label:Object(o.a)(d.a,{id:"community.column_settings.remote_only",defaultMessage:"Remote only"})}))))}}var C=Object(m.c)(v);var _=Object(h.connect)(((e,t)=>{let{columnId:n}=t;const o=n,i=e.getIn(["settings","columns"]),s=i.findIndex((e=>e.get("uuid")===o));return{settings:o&&s>=0?i.get(s).get("params"):e.getIn(["settings","public"])}}),((e,t)=>{let{columnId:n}=t;return{onChange(t,o){e(n?Object(y.f)(n,t,o):Object(I.c)(["public",...t],o))}}}))(C),w=n(5);const x=Object(l.d)({title:{id:"column.public",defaultMessage:"Federated timeline"}});class P extends a.PureComponent{constructor(){super(...arguments),Object(i.a)(this,"handlePin",(()=>{const{columnId:e,dispatch:t,onlyMedia:n,onlyRemote:o}=this.props;t(e?Object(y.h)(e):Object(y.e)(o?"REMOTE":"PUBLIC",{other:{onlyMedia:n,onlyRemote:o}}))})),Object(i.a)(this,"handleMove",(e=>{const{columnId:t,dispatch:n}=this.props;n(Object(y.g)(t,e))})),Object(i.a)(this,"handleHeaderClick",(()=>{this.column.scrollTop()})),Object(i.a)(this,"setRef",(e=>{this.column=e})),Object(i.a)(this,"handleLoadMore",(e=>{const{dispatch:t,onlyMedia:n,onlyRemote:o}=this.props;t(Object(j.z)({maxId:e,onlyMedia:n,onlyRemote:o}))}))}componentDidMount(){const{dispatch:e,onlyMedia:t,onlyRemote:n}=this.props,{signedIn:o}=this.context.identity;e(Object(j.z)({onlyMedia:t,onlyRemote:n})),o&&(this.disconnect=e(Object(g.e)({onlyMedia:t,onlyRemote:n})))}componentDidUpdate(e){const{signedIn:t}=this.context.identity;if(e.onlyMedia!==this.props.onlyMedia||e.onlyRemote!==this.props.onlyRemote){const{dispatch:e,onlyMedia:n,onlyRemote:o}=this.props;this.disconnect&&this.disconnect(),e(Object(j.z)({onlyMedia:n,onlyRemote:o})),t&&(this.disconnect=e(Object(g.e)({onlyMedia:n,onlyRemote:o})))}}componentWillUnmount(){this.disconnect&&(this.disconnect(),this.disconnect=null)}render(){const{intl:e,columnId:t,hasUnread:n,multiColumn:i,onlyMedia:s,onlyRemote:c}=this.props,a=!!t;return Object(w.jsxs)(O.a,{bindToDocument:!i,ref:this.setRef,label:e.formatMessage(x.title),children:[Object(o.a)(M.a,{icon:"globe",iconComponent:u.a,active:n,title:e.formatMessage(x.title),onPin:this.handlePin,onMove:this.handleMove,onClick:this.handleHeaderClick,pinned:a,multiColumn:i},void 0,Object(o.a)(_,{columnId:t})),Object(o.a)(f.a,{prepend:Object(o.a)(p.a,{id:"public_timeline"},void 0,Object(o.a)(d.a,{id:"dismissable_banner.public_timeline",defaultMessage:"These are the most recent public posts from people on the social web that people on {domain} follow.",values:{domain:b.i}})),timelineId:"public".concat(c?":remote":"").concat(s?":media":""),onLoadMore:this.handleLoadMore,trackScroll:!a,scrollKey:"public_timeline-".concat(t),emptyMessage:Object(o.a)(d.a,{id:"empty_column.public",defaultMessage:"There is nothing here! Write something publicly, or manually follow users from other servers to fill it up"}),bindToDocument:!i}),Object(o.a)(r.a,{},void 0,Object(o.a)("title",{},void 0,e.formatMessage(x.title)),Object(o.a)("meta",{name:"robots",content:"noindex"}))]})}}Object(i.a)(P,"contextTypes",{identity:c.a.object}),Object(i.a)(P,"defaultProps",{onlyMedia:!1});t.default=Object(h.connect)(((e,t)=>{let{columnId:n}=t;const o=n,i=e.getIn(["settings","columns"]),s=i.findIndex((e=>e.get("uuid")===o)),c=n&&s>=0?i.get(s).getIn(["params","other","onlyMedia"]):e.getIn(["settings","public","other","onlyMedia"]),a=n&&s>=0?i.get(s).getIn(["params","other","onlyRemote"]):e.getIn(["settings","public","other","onlyRemote"]),l=e.getIn(["timelines","public".concat(a?":remote":"").concat(c?":media":"")]);return{hasUnread:!!l&&l.get("unread")>0,onlyMedia:c,onlyRemote:a}}))(Object(m.c)(P))}}]);
//# sourceMappingURL=public_timeline-10e3e49a9d7c946a5c0b.chunk.js.map