(window.webpackJsonp=window.webpackJsonp||[]).push([[600],{1251:function(e,t){document.addEventListener("DOMContentLoaded",(function(){var e=0,t=function(){return(new Date).getTime()+e++},n=function(e){return"["+e+"]$1"},a=function(e){return"_"+e+"_$1"},o=function(e,o){e.preventDefault(),e.stopPropagation();var r=o,s=r.getAttribute("data-association"),i=r.getAttribute("data-associations"),c=r.getAttribute("data-association-insertion-template"),l=r.getAttribute("data-association-insertion-method")||r.getAttribute("data-association-insertion-position")||"before",d=r.getAttribute("data-association-insertion-node"),u=r.getAttribute("data-association-insertion-traversal"),m=parseInt(r.getAttribute("data-count"),10),f=new RegExp("\\[new_"+s+"\\](.*?\\s)","g"),p=new RegExp("_new_"+s+"_(\\w*)","g"),g=t(),h=c.replace(f,n(g)),v=[],b=e;for(h===c&&(f=new RegExp("\\[new_"+i+"\\](.*?\\s)","g"),p=new RegExp("_new_"+i+"_(\\w*)","g"),h=c.replace(f,n(g))),v=[h=h.replace(p,a(g))],m=isNaN(m)?1:Math.max(m,1),m-=1;m;)g=t(),h=(h=c.replace(f,n(g))).replace(p,a(g)),v.push(h),m-=1;var w=function(e,t,n){return e?"function"==typeof e?(t&&console.warn("association-insertion-traversal is ignored, because association-insertion-node is given as a function."),e(n)):"string"==typeof e?t?n[t](e):"this"===e?n:document.querySelector(e):void 0:n.parentNode}(d,u,r);w&&0!==w.length||console.warn("Couldn't find the element to insert the template. Make sure your `data-association-insertion-*` on `link_to_add_association` is correct."),v.forEach((function(e,t){var n=e,a=new CustomEvent("cocoon:before-insert",{bubbles:!0,cancelable:!0,detail:[n,b]});if(w.dispatchEvent(a),!a.defaultPrevented){var o={before:"beforebegin",prepend:"afterbegin",append:"beforeend",after:"afterend"},r=o[l],s=w.insertAdjacentHTML(r,n);r===o.before?s=w.previousElementSibling:r===o.prepend?s=w.firstElementChild:r===o.append?s=w.lastElementChild:r===o.after&&(s=w.nextElementSibling);var i=new CustomEvent("cocoon:after-insert",{bubbles:!0,detail:[n,b,s]});w.dispatchEvent(i)}}))},r=function(e,t){var n=t,a=n.getAttribute("data-wrapper-class")||"nested-fields",o=n.closest("."+a),r=o.parentNode,s=e;e.preventDefault(),e.stopPropagation();var i=new CustomEvent("cocoon:before-remove",{bubbles:!0,cancelable:!0,detail:[o,s]});if(r.dispatchEvent(i),!i.defaultPrevented){var c=r.getAttribute("data-remove-timeout")||0;setTimeout((function(){if(n.classList.contains("dynamic"))(a=o).parentElement.removeChild(a);else{(function(e,t){var n=e.previousElementSibling;if(!t)return n;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}(n,"input[type=hidden]")).value="1",o.style.display="none";for(var e=o.querySelectorAll("input[required]"),t=0;t<e.length;t++)e[t].removeAttribute("required")}var a,i=new CustomEvent("cocoon:after-remove",{bubbles:!0,detail:[o,s]});r.dispatchEvent(i)}),c)}};document.addEventListener("click",(function(e){for(var t=e.target;t&&t!==this;t=t.parentNode){if(t.matches(".add_fields"))return void o(e,t);if(t.matches(".remove_fields"))return void r(e,t)}}),!1);var s=function(){for(var e=document.querySelectorAll(".remove_fields.existing.destroyed"),t=0;t<e.length;t++){var n=e[t],a=n.getAttribute("data-wrapper-class")||"nested-fields";n.closest("."+a).style.display="none"}};document.addEventListener("page:load",s),document.addEventListener("turbolinks:load",s),document.addEventListener("turbo:load",s),s()}))},1377:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n(73),r=n.n(o),s=(n(17),n(170),n(171),n(172),n(173),n(143)),i=(n(153),n(1380)),c=n(9),l=n(48),d=n(168),u=n(199),m=n(78),f=n(54);var p=n(108),g=n(200),h=n(58);n(1251);Object(u.a)();const v=Object(c.d)({usernameTaken:{id:"username.taken",defaultMessage:"That username is taken. Try another"},passwordExceedsLength:{id:"password_confirmation.exceeds_maxlength",defaultMessage:"Password confirmation exceeds the maximum password length"},passwordDoesNotMatch:{id:"password_confirmation.mismatching",defaultMessage:"Password confirmation does not match"}});function b(){const{messages:e}=Object(p.b)(),t=document.documentElement.lang,o=new Intl.DateTimeFormat(t,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),c=new Intl.DateTimeFormat(t,{year:"numeric",month:"short",day:"numeric"}),u=new Intl.DateTimeFormat(t,{timeStyle:"short"}),g=(n,a)=>{let o,{id:r,defaultMessage:s}=n;r&&(o=e[r]),o||(o=s);return new i.a(o,t).format(a)};document.querySelectorAll(".emojify").forEach((e=>{e.innerHTML=Object(f.c)(e.innerHTML)})),document.querySelectorAll("time.formatted").forEach((e=>{const t=new Date(e.dateTime),n=o.format(t);e.title=n,e.textContent=n}));const h=new i.a(e["relative_format.today"]||"Today at {time}",t);document.querySelectorAll("time.relative-formatted").forEach((e=>{const t=new Date(e.dateTime);let n;if((e=>{const t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()})(t)){const e=u.format(t);n=h.format({time:e})}else n=c.format(t);e.title=n,e.textContent=n})),document.querySelectorAll("time.time-ago").forEach((e=>{const n=new Date(e.dateTime),a=new Date,r=e.dateTime.includes("T");e.title=r?o.format(n):c.format(n),e.textContent=Object(m.b)({formatMessage:g,formatDate:(e,n)=>new Intl.DateTimeFormat(t,n).format(e)},n,a.getTime(),a.getFullYear(),r)}));const b=document.querySelectorAll("[data-component]");b.length>0&&n.e(440).then(n.bind(null,1637)).then((e=>{let{default:n}=e;b.forEach((e=>{Array.from(e.children).forEach((t=>{e.removeChild(t)}))}));const o=document.createElement("div");return Object(s.createRoot)(o).render(Object(a.a)(n,{locale:t,components:b})),document.body.appendChild(o),!0})).catch((e=>{console.error(e)})),l.a.delegate(document,"input#user_account_attributes_username","input",r()((e=>{let{target:t}=e;t instanceof HTMLInputElement&&(t.value&&t.value.length>0?d.a.get("/api/v1/accounts/lookup",{params:{acct:t.value}}).then((()=>(t.setCustomValidity(g(v.usernameTaken)),!0))).catch((()=>{t.setCustomValidity("")})):t.setCustomValidity(""))}),500,{leading:!1,trailing:!0})),l.a.delegate(document,"#user_password,#user_password_confirmation","input",(()=>{const e=document.querySelector("input#user_password"),t=document.querySelector("input#user_password_confirmation");t&&e&&(t.value&&t.value.length>e.maxLength?t.setCustomValidity(g(v.passwordExceedsLength)):e.value&&e.value!==t.value?t.setCustomValidity(g(v.passwordDoesNotMatch)):t.setCustomValidity(""))})),l.a.delegate(document,"button.status__content__spoiler-link","click",(function(){var n;if(!(this instanceof HTMLButtonElement))return;const a=null===(n=this.parentNode)||void 0===n?void 0:n.parentNode;a instanceof HTMLDivElement&&a.classList.contains(".status__content")&&("expanded"===a.dataset.spoiler?(a.dataset.spoiler="folded",this.textContent=new i.a(e["status.show_more"]||"Show more",t).format()):(a.dataset.spoiler="expanded",this.textContent=new i.a(e["status.show_less"]||"Show less",t).format()))})),document.querySelectorAll("button.status__content__spoiler-link").forEach((n=>{var a;const o=null===(a=n.parentNode)||void 0===a?void 0:a.parentNode;if(!(o instanceof HTMLDivElement&&o.classList.contains(".status__content")))return;const r="expanded"===o.dataset.spoiler?e["status.show_less"]||"Show less":e["status.show_more"]||"Show more";n.textContent=new i.a(r,t).format()}))}window.addEventListener("message",(e=>{if(!e.data||!function(e){return!(!e||"object"!=typeof e||!("type"in e)||"setHeight"!==e.type)}(e.data)||!window.parent)return;const t=e.data;Object(h.a)((()=>{window.parent.postMessage({type:"setHeight",id:t.id,height:document.getElementsByTagName("html")[0].scrollHeight},"*")})).catch((e=>{console.error("Error in setHeightMessage postMessage",e)}))})),l.a.delegate(document,"#edit_profile input[type=file]","change",(e=>{let{target:t}=e;if(!(t instanceof HTMLInputElement))return;const n=document.querySelector("img#".concat(t.id,"-preview"));if(!n)return;let a;t.files&&(a=t.files[0]);const o=a?URL.createObjectURL(a):n.dataset.originalSrc;o&&(n.src=o)})),l.a.delegate(document,".input-copy input","click",(e=>{let{target:t}=e;t instanceof HTMLInputElement&&(t.focus(),t.select(),t.setSelectionRange(0,t.value.length))})),l.a.delegate(document,".input-copy button","click",(e=>{var t;let{target:n}=e;if(!(n instanceof HTMLButtonElement))return;const a=null===(t=n.parentNode)||void 0===t?void 0:t.querySelector(".input-copy__wrapper input");if(!a)return;const o=a.readOnly;a.readOnly=!1,a.focus(),a.select(),a.setSelectionRange(0,a.value.length);try{if(document.execCommand("copy")){a.blur();const e=n.parentElement;if(!e)return;e.classList.add("copied"),setTimeout((()=>{e.classList.remove("copied")}),700)}}catch(e){console.error(e)}a.readOnly=o}));const w=()=>{const e=document.querySelector(".sidebar ul"),t=document.querySelector("a.sidebar__toggle__icon");e&&t&&(e.classList.contains("visible")?(document.body.style.overflow="",t.setAttribute("aria-expanded","false")):(document.body.style.overflow="hidden",t.setAttribute("aria-expanded","true")),t.classList.toggle("active"),e.classList.toggle("visible"))};l.a.delegate(document,".sidebar__toggle__icon","click",(()=>{w()})),l.a.delegate(document,".sidebar__toggle__icon","keydown",(e=>{" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),w())})),l.a.delegate(document,"img.custom-emoji","mouseover",(e=>{let{target:t}=e;t instanceof HTMLImageElement&&t.dataset.original&&(t.src=t.dataset.original)})),l.a.delegate(document,"img.custom-emoji","mouseout",(e=>{let{target:t}=e;t instanceof HTMLImageElement&&t.dataset.static&&(t.src=t.dataset.static)})),l.a.delegate(document,"#registration_new_user,#new_user","submit",(()=>{["user_website","user_confirm_password","registration_user_website","registration_user_confirm_password"].forEach((e=>{const t=document.querySelector("input#".concat(e));t&&(t.value="")}))})),Object(g.a)().then(p.c).then((function(){Object(h.a)(b).catch((e=>{console.error(e)}))})).then((function(){return/KAIOS/.test(navigator.userAgent)?n.e(439).then(n.bind(null,1638)).then((e=>{e.register()})):Promise.resolve()})).catch((e=>{console.error(e)}))}},[[1377,0]]]);
//# sourceMappingURL=public-89583306f8dce9a298d1.chunk.js.map